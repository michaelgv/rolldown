!function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=function(){function n(){e(this,n),this._routes=[],this._current_route=null,this._default_route={}}return t(n,[{key:"hashChange",value:function(){this.findPredefinedRoute()}},{key:"applyRoutes",value:function(e){this._routes=e}},{key:"runDefaultRoute",value:function(){var e=this._default_route;if(e){if("function"==typeof e.component&&void 0!==e.component.getDescription){var t=new e.component;void 0!==t.willRender&&t.willRender(),t.render()}else e.component();this._current_route=e}}},{key:"runRoute",value:function(e){var t=this;if(this._routes.forEach(function(n){if(n.route!==e);else{if("function"==typeof n.component&&void 0!==n.component.getDescription){var o=new n.component;void 0!==o.willRender&&o.willRender(),o.render()}else n.component();t._current_route=n}}),null===this._current_route)if("function"==typeof this._default_route.component&&void 0!==this._default_route.component.getDescription){var n=new this._default_route.component;void 0!==n.willRender&&n.willRender(),n.render()}else this._default_route.component()}},{key:"findDefault",value:function(){var e=this;this._routes.forEach(function(t){void 0!==t.default&&t.default&&(e._default_route=t)})}},{key:"findPredefinedRoute",value:function(){if(""!==window.location.hash){var e=window.location.hash;e=e.replace(/\#\//g,""),this.runRoute(e)}else this.runDefaultRoute()}}]),n}();"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var i,s=(function(e,t){var n;n=function(){var e,t=function(e){if(e){var t,n=Object.keys(e),o=n.length;for(t=0;t<o;t++)this[n[t]]=e[n[t]]}};t.prototype={toString:function(){return JSON.stringify(this)},setValue:function(e,t){return this[e]=t,this}};var n=function(e,t){this.oldValue=e,this.newValue=t};n.prototype={contains:function(e){return e.length<this.length&&(e.newValue>=this.newValue&&e.newValue<this.newValue+this.length)},toString:function(){return this.length+" element subset, first mapping: old "+this.oldValue+" â†’ new "+this.newValue}};var o=function(e){var t=[];return"#text"!==e.nodeName&&"#comment"!==e.nodeName&&(t.push(e.nodeName),e.attributes&&(e.attributes.class&&t.push(e.nodeName+"."+e.attributes.class.replace(/ /g,".")),e.attributes.id&&t.push(e.nodeName+"#"+e.attributes.id))),t},i=function(e){var t,n,i,s,a,r,l,c={},u={},d=e.length;for(r=0;r<d;r++)for(t=(n=e[r]).length,i=o(n),l=0;l<t;l++)(a=(s=i[l])in c)||s in u?a&&(delete c[s],u[s]=!0):c[s]=!0;return c},s=function(e,t){var n,o,s=i(e),a=i(t),r={},l=Object.keys(s),c=l.length;for(o=0;o<c;o++)a[n=l[o]]&&(r[n]=!0);return r},a=function(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(a)},r=function(e,t){var n,o;if(!["nodeName","value","checked","selected","data"].every(function(n){return e[n]===t[n]}))return!1;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){if(n=Object.keys(e.attributes),o=Object.keys(t.attributes),n.length!==o.length)return!1;if(!n.every(function(n){if(e.attributes[n]!==t.attributes[n])return!1}))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every(function(e,n){return r(e,t.childNodes[n])}))return!1}return!0},l=function(e,t,n,o,i){var a,r,c;if(!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if("#text"===e.nodeName)return!!i||e.data===t.data;if(e.nodeName in n)return!0;if(e.attributes&&t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if(e.nodeName+"#"+e.attributes.id in n)return!0}if(e.attributes.class&&e.attributes.class===t.attributes.class)if(e.nodeName+"."+e.attributes.class.replace(/ /g,".")in n)return!0}return!!o||(r=e.childNodes?e.childNodes.slice().reverse():[],c=t.childNodes?t.childNodes.slice().reverse():[],r.length===c.length&&(i?r.every(function(e,t){return e.nodeName===c[t].nodeName}):(a=s(r,c),r.every(function(e,t){return l(e,c[t],a,!0,!0)}))))},c=function(e){return JSON.parse(JSON.stringify(e))},u=function(e,t,i,a){var r,c,u,d,h,f,m=0,p=[],_=e.length,v=t.length,b=Array.apply(null,new Array(_+1)).map(function(){return[]}),g=s(e,t),y=_===v;for(y&&e.some(function(e,n){var i=o(e),s=o(t[n]);return i.length!==s.length?(y=!1,!0):(i.some(function(e,t){if(e!==s[t])return y=!1,!0}),!y||void 0)}),u=0;u<_;u++)for(h=e[u],d=0;d<v;d++)f=t[d],i[u]||a[d]||!l(h,f,g,y)?b[u+1][d+1]=0:(b[u+1][d+1]=b[u][d]?b[u][d]+1:1,b[u+1][d+1]>=m&&(m=b[u+1][d+1],p=[u+1,d+1]));return 0!==m&&(r=[p[0]-m,p[1]-m],(c=new n(r[0],r[1])).length=m,c)},d=function(e,t){return Array.apply(null,new Array(e)).map(function(){return t})};function h(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}var f=function(){this.list=[]};f.prototype={list:!1,add:function(e){this.list.push.apply(this.list,e)},forEach:function(e){var t,n=this.list.length;for(t=0;t<n;t++)e(this.list[t])}};var m=function(e){var t,n,o={debug:!1,diffcap:10,maxDepth:!1,valueDiffing:!0,textDiff:function(){arguments[0].data=arguments[3]},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1};for(t in void 0===e&&(e={}),o)void 0===e[t]?this[t]=o[t]:this[t]=e[t];var i={addAttribute:"addAttribute",modifyAttribute:"modifyAttribute",removeAttribute:"removeAttribute",modifyTextElement:"modifyTextElement",relocateGroup:"relocateGroup",removeElement:"removeElement",addElement:"addElement",removeTextElement:"removeTextElement",addTextElement:"addTextElement",replaceElement:"replaceElement",modifyValue:"modifyValue",modifyChecked:"modifyChecked",modifySelected:"modifySelected",modifyComment:"modifyComment",action:"action",route:"route",oldValue:"oldValue",newValue:"newValue",element:"element",group:"group",from:"from",to:"to",name:"name",value:"value",data:"data",attributes:"attributes",nodeName:"nodeName",childNodes:"childNodes",checked:"checked",selected:"selected"};if(this.compress)for(t in n=0,this._const={},i)this._const[t]=n,n++;else this._const=i};return m.Diff=t,m.prototype={diff:function(t,n){var o=this.nodeToObj(t),i=this.nodeToObj(n);return e=0,this.debug&&(this.t1Orig=this.nodeToObj(t),this.t2Orig=this.nodeToObj(n)),this.tracker=new f,this.findDiffs(o,i)},findDiffs:function(t,n){var o;do{if(this.debug&&(e+=1)>this.diffcap)throw window.diffError=[this.t1Orig,this.t2Orig],new Error("surpassed diffcap:"+JSON.stringify(this.t1Orig)+" -> "+JSON.stringify(this.t2Orig));0===(o=this.findNextDiff(t,n,[])).length&&(r(t,n)||(a(t),o=this.findNextDiff(t,n,[]))),o.length>0&&(this.tracker.add(o),this.applyVirtual(t,o))}while(o.length>0);return this.tracker.list},findNextDiff:function(e,t,n){var o,i;if(this.maxDepth&&n.length>this.maxDepth)return[];if(!e.outerDone){if(o=this.findOuterDiff(e,t,n),this.filterOuterDiff&&(i=this.filterOuterDiff(e,t,o))&&(o=i),o.length>0)return e.outerDone=!0,o;e.outerDone=!0}if(!e.innerDone){if((o=this.findInnerDiff(e,t,n)).length>0)return o;e.innerDone=!0}if(this.valueDiffing&&!e.valueDone){if((o=this.findValueDiff(e,t,n)).length>0)return e.valueDone=!0,o;e.valueDone=!0}return[]},findOuterDiff:function(e,n,o){var i,s,a,r,l,u,d=this,h=[];if(e.nodeName!==n.nodeName)return[(new t).setValue(d._const.action,d._const.replaceElement).setValue(d._const.oldValue,c(e)).setValue(d._const.newValue,c(n)).setValue(d._const.route,o)];if(e.data!==n.data)return"#text"===e.nodeName?[(new t).setValue(d._const.action,d._const.modifyTextElement).setValue(d._const.route,o).setValue(d._const.oldValue,e.data).setValue(d._const.newValue,n.data)]:[(new t).setValue(d._const.action,d._const.modifyComment).setValue(d._const.route,o).setValue(d._const.oldValue,e.data).setValue(d._const.newValue,n.data)];for(s=e.attributes?Object.keys(e.attributes).sort():[],a=n.attributes?Object.keys(n.attributes).sort():[],r=s.length,u=0;u<r;u++)i=s[u],-1===(l=a.indexOf(i))?h.push((new t).setValue(d._const.action,d._const.removeAttribute).setValue(d._const.route,o).setValue(d._const.name,i).setValue(d._const.value,e.attributes[i])):(a.splice(l,1),e.attributes[i]!==n.attributes[i]&&h.push((new t).setValue(d._const.action,d._const.modifyAttribute).setValue(d._const.route,o).setValue(d._const.name,i).setValue(d._const.oldValue,e.attributes[i]).setValue(d._const.newValue,n.attributes[i])));for(r=a.length,u=0;u<r;u++)i=a[u],h.push((new t).setValue(d._const.action,d._const.addAttribute).setValue(d._const.route,o).setValue(d._const.name,i).setValue(d._const.value,n.attributes[i]));return h},nodeToObj:function(e){var t,n,o,i,s,a={};if(a.nodeName=e.nodeName,"#text"===a.nodeName||"#comment"===a.nodeName)a.data=e.data;else{if(e.attributes&&e.attributes.length>0)for(a.attributes={},o=(t=Array.prototype.slice.call(e.attributes)).length,s=0;s<o;s++)i=t[s],a.attributes[i.name]=i.value;if("TEXTAREA"===a.nodeName)a.value=e.value;else if(e.childNodes&&e.childNodes.length>0)for(a.childNodes=[],o=(t=Array.prototype.slice.call(e.childNodes)).length,s=0;s<o;s++)n=t[s],a.childNodes.push(this.nodeToObj(n));this.valueDiffing&&(void 0!==e.checked&&e.type&&-1!==["radio","checkbox"].indexOf(e.type.toLowerCase())?a.checked=e.checked:void 0!==e.value&&(a.value=e.value),void 0!==e.selected&&(a.selected=e.selected))}return a},objToNode:function(e,t){var n,o,i,s,a,r,l;if("#text"===e.nodeName)n=document.createTextNode(e.data);else if("#comment"===e.nodeName)n=document.createComment(e.data);else{if("svg"===e.nodeName||t?(n=document.createElementNS("http://www.w3.org/2000/svg",e.nodeName),t=!0):n=document.createElement(e.nodeName),e.attributes)for(r=(i=Object.keys(e.attributes)).length,l=0;l<r;l++)o=i[l],n.setAttribute(o,e.attributes[o]);if(e.childNodes)for(r=(a=e.childNodes).length,l=0;l<r;l++)s=a[l],n.appendChild(this.objToNode(s,t));this.valueDiffing&&(e.value&&(n.value=e.value),e.checked&&(n.checked=e.checked),e.selected&&(n.selected=e.selected))}return n},findInnerDiff:function(e,n,o){var i,s,a,r,l,h=this,f=e.childNodes&&n.childNodes?function(e,t){for(var n,o,i,s=e.childNodes?e.childNodes:[],a=t.childNodes?t.childNodes:[],r=d(s.length,!1),l=d(a.length,!1),c=[],h=!0,f=function(){return arguments[1]},m=function(e){r[h.oldValue+e]=!0,l[h.newValue+e]=!0};h;)if(h=u(s,a,r,l))for(c.push(h),n=(o=Array.apply(null,new Array(h.length)).map(f)).length,i=0;i<n;i++)m(o[i]);return c}(e,n):[],m=e.childNodes?e.childNodes:[],p=n.childNodes?n.childNodes:[],_=[],v=0;if(f.length>0&&(_=this.attemptGroupRelocation(e,n,f,o)).length>0)return _;for(s=Math.max(m.length,p.length),m.length!==p.length&&(i=!0),l=0;l<s;l+=1)a=m[l],r=p[l],i&&(a&&!r?"#text"===a.nodeName?(_.push((new t).setValue(h._const.action,h._const.removeTextElement).setValue(h._const.route,o.concat(v)).setValue(h._const.value,a.data)),v-=1):(_.push((new t).setValue(h._const.action,h._const.removeElement).setValue(h._const.route,o.concat(v)).setValue(h._const.element,c(a))),v-=1):r&&!a&&("#text"===r.nodeName?_.push((new t).setValue(h._const.action,h._const.addTextElement).setValue(h._const.route,o.concat(v)).setValue(h._const.value,r.data)):_.push((new t).setValue(h._const.action,h._const.addElement).setValue(h._const.route,o.concat(v)).setValue(h._const.element,c(r))))),a&&r&&(_=_.concat(this.findNextDiff(a,r,o.concat(v)))),v+=1;return e.innerDone=!0,_},attemptGroupRelocation:function(e,n,o,i){var s,a,r,u,h,f,m,p,_,v=this,b=function(e,t,n){var o,i,s,a,r,l=e.childNodes?d(e.childNodes.length,!0):[],c=t.childNodes?d(t.childNodes.length,!0):[],u=0,h=n.length;for(o=0;o<h;o++){for(s=(r=n[o]).oldValue+r.length,a=r.newValue+r.length,i=r.oldValue;i<s;i+=1)l[i]=u;for(i=r.newValue;i<a;i+=1)c[i]=u;u+=1}return{gaps1:l,gaps2:c}}(e,n,o),g=b.gaps1,y=b.gaps2,V=Math.min(g.length,y.length),w=[];for(p=0,m=0;p<V;m+=1,p+=1)if(!0===g[p])if("#text"===(u=e.childNodes[m]).nodeName){if("#text"===n.childNodes[p].nodeName&&u.data!==n.childNodes[p].data){for(f=m;e.childNodes.length>f+1&&"#text"===e.childNodes[f+1].nodeName;)if(f+=1,n.childNodes[p].data===e.childNodes[f].data){h=!0;break}if(!h)return w.push((new t).setValue(v._const.action,v._const.modifyTextElement).setValue(v._const.route,i.concat(p)).setValue(v._const.oldValue,u.data).setValue(v._const.newValue,n.childNodes[p].data)),w}w.push((new t).setValue(v._const.action,v._const.removeTextElement).setValue(v._const.route,i.concat(p)).setValue(v._const.value,u.data)),g.splice(p,1),V=Math.min(g.length,y.length),p-=1}else w.push((new t).setValue(v._const.action,v._const.removeElement).setValue(v._const.route,i.concat(p)).setValue(v._const.element,c(u))),g.splice(p,1),V=Math.min(g.length,y.length),p-=1;else if(!0===y[p])"#text"===(u=n.childNodes[p]).nodeName?(w.push((new t).setValue(v._const.action,v._const.addTextElement).setValue(v._const.route,i.concat(p)).setValue(v._const.value,u.data)),g.splice(p,0,!0),V=Math.min(g.length,y.length),m-=1):(w.push((new t).setValue(v._const.action,v._const.addElement).setValue(v._const.route,i.concat(p)).setValue(v._const.element,c(u))),g.splice(p,0,!0),V=Math.min(g.length,y.length),m-=1);else if(g[p]!==y[p]){if(w.length>0)return w;if(r=o[g[p]],(a=Math.min(r.newValue,e.childNodes.length-r.length))!==r.oldValue){for(s=!1,_=0;_<r.length;_+=1)l(e.childNodes[a+_],e.childNodes[r.oldValue+_],[],!1,!0)||(s=!0);if(s)return[(new t).setValue(v._const.action,v._const.relocateGroup).setValue("groupLength",r.length).setValue(v._const.from,r.oldValue).setValue(v._const.to,a).setValue(v._const.route,i)]}}return w},findValueDiff:function(e,n,o){var i=[],s=this;return e.selected!==n.selected&&i.push((new t).setValue(s._const.action,s._const.modifySelected).setValue(s._const.oldValue,e.selected).setValue(s._const.newValue,n.selected).setValue(s._const.route,o)),(e.value||n.value)&&e.value!==n.value&&"OPTION"!==e.nodeName&&i.push((new t).setValue(s._const.action,s._const.modifyValue).setValue(s._const.oldValue,e.value).setValue(s._const.newValue,n.value).setValue(s._const.route,o)),e.checked!==n.checked&&i.push((new t).setValue(s._const.action,s._const.modifyChecked).setValue(s._const.oldValue,e.checked).setValue(s._const.newValue,n.checked).setValue(s._const.route,o)),i},applyVirtual:function(e,t){var n,o,i=t.length;if(0===i)return!0;for(o=0;o<i;o++)n=t[o],this.applyVirtualDiff(e,n);return!0},getFromVirtualRoute:function(e,t){var n,o,i=e;for(t=t.slice();t.length>0;){if(!i.childNodes)return!1;o=t.splice(0,1)[0],n=i,i=i.childNodes[o]}return{node:i,parentNode:n,nodeIndex:o}},applyVirtualDiff:function(e,t){var n,o,i,s,a,r,l,u=this.getFromVirtualRoute(e,t[this._const.route]),d=u.node,h=u.parentNode,f=u.nodeIndex,m={diff:t,node:d};if(this.preVirtualDiffApply(m))return!0;switch(t[this._const.action]){case this._const.addAttribute:d.attributes||(d.attributes={}),d.attributes[t[this._const.name]]=t[this._const.value],"checked"===t[this._const.name]?d.checked=!0:"selected"===t[this._const.name]?d.selected=!0:"INPUT"===d.nodeName&&"value"===t[this._const.name]&&(d.value=t[this._const.value]);break;case this._const.modifyAttribute:d.attributes[t[this._const.name]]=t[this._const.newValue],"INPUT"===d.nodeName&&"value"===t[this._const.name]&&(d.value=t[this._const.value]);break;case this._const.removeAttribute:delete d.attributes[t[this._const.name]],0===Object.keys(d.attributes).length&&delete d.attributes,"checked"===t[this._const.name]?d.checked=!1:"selected"===t[this._const.name]?delete d.selected:"INPUT"===d.nodeName&&"value"===t[this._const.name]&&delete d.value;break;case this._const.modifyTextElement:d.data=t[this._const.newValue];break;case this._const.modifyValue:d.value=t[this._const.newValue];break;case this._const.modifyComment:d.data=t[this._const.newValue];break;case this._const.modifyChecked:d.checked=t[this._const.newValue];break;case this._const.modifySelected:d.selected=t[this._const.newValue];break;case this._const.replaceElement:(n=c(t[this._const.newValue])).outerDone=!0,n.innerDone=!0,n.valueDone=!0,h.childNodes[f]=n;break;case this._const.relocateGroup:for(a=(i=d.childNodes.splice(t[this._const.from],t.groupLength).reverse()).length,l=0;l<a;l++)o=i[l],d.childNodes.splice(t[this._const.to],0,o);break;case this._const.removeElement:h.childNodes.splice(f,1);break;case this._const.addElement:r=(s=t[this._const.route].slice()).splice(s.length-1,1)[0],d=this.getFromVirtualRoute(e,s).node,(n=c(t[this._const.element])).outerDone=!0,n.innerDone=!0,n.valueDone=!0,d.childNodes||(d.childNodes=[]),r>=d.childNodes.length?d.childNodes.push(n):d.childNodes.splice(r,0,n);break;case this._const.removeTextElement:h.childNodes.splice(f,1),"TEXTAREA"===h.nodeName&&delete h.value;break;case this._const.addTextElement:r=(s=t[this._const.route].slice()).splice(s.length-1,1)[0],(n={}).nodeName="#text",n.data=t[this._const.value],(d=this.getFromVirtualRoute(e,s).node).childNodes||(d.childNodes=[]),r>=d.childNodes.length?d.childNodes.push(n):d.childNodes.splice(r,0,n),"TEXTAREA"===d.nodeName&&(d.value=t[this._const.newValue]);break;default:console.log("unknown action")}m.newNode=n,this.postVirtualDiffApply(m)},apply:function(e,t){var n,o,i=t.length;if(0===i)return!0;for(o=0;o<i;o++)if(n=t[o],!this.applyDiff(e,n))return!1;return!0},getFromRoute:function(e,t){t=t.slice();for(var n,o=e;t.length>0;){if(!o.childNodes)return!1;n=t.splice(0,1)[0],o=o.childNodes[n]}return o},applyDiff:function(e,t){var n,o,i,s,a,r,l,c,u=this.getFromRoute(e,t[this._const.route]),d=this,h={diff:t,node:u};if(this.preDiffApply(h))return!0;switch(t[this._const.action]){case this._const.addAttribute:if(!u||!u.setAttribute)return!1;u.setAttribute(t[this._const.name],t[this._const.value]);break;case this._const.modifyAttribute:if(!u||!u.setAttribute)return!1;u.setAttribute(t[this._const.name],t[this._const.newValue]);break;case this._const.removeAttribute:if(!u||!u.removeAttribute)return!1;u.removeAttribute(t[this._const.name]);break;case this._const.modifyTextElement:if(!u||3!==u.nodeType)return!1;this.textDiff(u,u.data,t[this._const.oldValue],t[this._const.newValue]);break;case this._const.modifyValue:if(!u||void 0===u.value)return!1;u.value=t[this._const.newValue];break;case this._const.modifyComment:if(!u||void 0===u.data)return!1;this.textDiff(u,u.data,t[this._const.oldValue],t[this._const.newValue]);break;case this._const.modifyChecked:if(!u||void 0===u.checked)return!1;u.checked=t[this._const.newValue];break;case this._const.modifySelected:if(!u||void 0===u.selected)return!1;u.selected=t[this._const.newValue];break;case this._const.replaceElement:u.parentNode.replaceChild(this.objToNode(t[this._const.newValue],"http://www.w3.org/2000/svg"===u.namespaceURI),u);break;case this._const.relocateGroup:for(a=(s=Array.apply(null,new Array(t.groupLength)).map(function(){return u.removeChild(u.childNodes[t[d._const.from]])})).length,l=0;l<a;l++)r=s[l],0===l&&(o=u.childNodes[t[d._const.to]]),u.insertBefore(r,o||null);break;case this._const.removeElement:u.parentNode.removeChild(u);break;case this._const.addElement:c=(i=t[this._const.route].slice()).splice(i.length-1,1)[0],(u=this.getFromRoute(e,i)).insertBefore(this.objToNode(t[this._const.element],"http://www.w3.org/2000/svg"===u.namespaceURI),u.childNodes[c]||null);break;case this._const.removeTextElement:if(!u||3!==u.nodeType)return!1;u.parentNode.removeChild(u);break;case this._const.addTextElement:if(c=(i=t[this._const.route].slice()).splice(i.length-1,1)[0],n=document.createTextNode(t[this._const.value]),!(u=this.getFromRoute(e,i))||!u.childNodes)return!1;u.insertBefore(n,u.childNodes[c]||null);break;default:console.log("unknown action")}return h.newNode=n,this.postDiffApply(h),!0},undo:function(e,t){var n,o,i=t.length;for(t=t.slice(),i||(t=[t]),t.reverse(),o=0;o<i;o++)n=t[o],this.undoDiff(e,n)},undoDiff:function(e,t){switch(t[this._const.action]){case this._const.addAttribute:t[this._const.action]=this._const.removeAttribute,this.applyDiff(e,t);break;case this._const.modifyAttribute:h(t,this._const.oldValue,this._const.newValue),this.applyDiff(e,t);break;case this._const.removeAttribute:t[this._const.action]=this._const.addAttribute,this.applyDiff(e,t);break;case this._const.modifyTextElement:case this._const.modifyValue:case this._const.modifyComment:case this._const.modifyChecked:case this._const.modifySelected:case this._const.replaceElement:h(t,this._const.oldValue,this._const.newValue),this.applyDiff(e,t);break;case this._const.relocateGroup:h(t,this._const.from,this._const.to),this.applyDiff(e,t);break;case this._const.removeElement:t[this._const.action]=this._const.addElement,this.applyDiff(e,t);break;case this._const.addElement:t[this._const.action]=this._const.removeElement,this.applyDiff(e,t);break;case this._const.removeTextElement:t[this._const.action]=this._const.addTextElement,this.applyDiff(e,t);break;case this._const.addTextElement:t[this._const.action]=this._const.removeTextElement,this.applyDiff(e,t);break;default:console.log("unknown action")}}},m},e.exports?t=e.exports=n():t.diffDOM=n()}(i={exports:{}},i.exports),i.exports),a=(s.diffDOM,function(){function n(){e(this,n),this.state={},this.vrep=null,this.changelog=[]}return t(n,null,[{key:"getDescription",value:function(){return{type:"component"}}}]),t(n,[{key:"createState",value:function(e,t,n){if(void 0!==this.state[e])throw new TypeError("You cannot re-bind "+e+" as it has already been defined. Please use setState to update values, or destroyState to force it out of the virtual representation object");this.state[e]={bindValue:t,vrep:null,callees:[],shadow_children:[],inspect:function(){return{stateName:e,stateValue:t,stateBinder:n}}},this.bindStateToVrep(e,n),this.shouldUpdate(this.state[e])}},{key:"qSelect",value:function(e,t){return this.templateVREP.querySelector("#ptest").dataset.testid="test",void 0!==t&&t?(this.changelog.push({sel:e}),this.template.querySelector(e)):(this.changelog.push({sel:e}),this.templateVREP.querySelector(e))}},{key:"qCommit",value:function(){var e=new s,t=e.diff(this.template,this.templateVREP);e.apply(this.template,t)}},{key:"setState",value:function(e,t){void 0===this.state[e]&&(this.state[e]={bindValue:t,vrep:null,callees:[]}),this.state[e].bindValue=t,this.shouldUpdate(this.state[e])}},{key:"clearState",value:function(){this.state={}}},{key:"loadTemplate",value:function(e){this.template=e,this.templateVREP=this.template.cloneNode(!0),this.shadow_parent=null,void 0!==this.template.dataset&&"undefined"!==this.template.dataset.parentvrep&&(this.shadow_parent=this.template.dataset.parentvrep),null!==this.shadow_parent?this.shadow_parent=document.querySelector(this.shadow_parent):this.shadow_parent=document.body||document.getElementsByTagName("body")[0]}},{key:"bindStateToVrep",value:function(e,t){if(void 0===this.template)return!1;this.state[e].vrep=this.template.querySelector(t)}},{key:"shouldUpdate",value:function(e){null!==e.vrep?e.vrep.innerHTML=e.bindValue:console.log("WARNING: You cannot trigger shouldUpdate on a state without a virtual representation binding. In order to bind an item, you need to define a binder. Read more: https://rolldown.js.org/guide/binders#vrep-binding")}},{key:"render",value:function(){void 0!==this.shadow_parent&&null!==this.shadow_parent||(this.shadow_parent=document.body||document.getElementsByTagName("body")[0]),this.template=this.shadow_parent.appendChild(this.template),void 0!==window.committer&&window.commiter.commit("render",this)}}]),n}()),r=function(){function n(t,o){e(this,n),this.scope=o,this.addToScope(t)}return t(n,[{key:"commiterObject",value:function(){return{states:[],modules:[]}}}]),t(n,[{key:"commit",value:function(e,t,n){var o=this.scope;if(void 0===window.gcommiter.states[e])throw new TypeError("You cannot commit to "+e+' as it is not available in the "'+o+'" scope');if(void 0===window.gcommiter.states[e])throw new TypeError("You cannot commit to "+e+" as it has never been created. Please call createCommit before calling commit.");window.gcommiter.states[e].bindValue=t,this.shouldUpdate(window.gcommiter.states[e])}},{key:"createCommit",value:function(e,t,n){win.gcommiter.states.push({bindAction:e,bindValue:t,vrep:null,binder:n})}},{key:"shouldUpdate",value:function(e){window.gcommiter.modules.forEach(function(t){void 0!==t.eventNotice&&t.eventNotice(e)})}},{key:"addToScope",value:function(e){window.gcommiter.modules.push(e)}}]),n}(),l=[{route:"/",default:!0,component:function(o){function i(){e(this,i);var t=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.commiter=new r(t),t.loadTemplate(t.genExampleTemplate()),setTimeout(function(){t.qSelect("#ptest > span").innerText=" ..... Changed after 1 seconds successfully",t.qCommit()},1e3),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a),t(i,[{key:"genExampleTemplate",value:function(){var e=document.createElement("div");e.dataset.parentvrep="#root",e.id="examplecontainer",e.classList.add("container");var t=document.createElement("p");t.id="ptest",t.innerText="Hello, world! This was rendered from the example component. In 15 seconds this text will change";var n=document.createElement("span");return n.innerText="test, me, here!",t.appendChild(n),e.appendChild(t),e}}]),i}()}],c=function(e){return console.log(e)};window.gcommiter={modules:[],states:[]},c("Starting router...");var u=new o;c("Router started"),c("Applying routes from routes file"),u.applyRoutes(l),c("Routes applied"),c("Finding default route"),u.findDefault(),c("Found default route"),c("Checking if we have a predefined route"),u.findPredefinedRoute(),c("Checked predefined route, and routed if found, otherwise evaluated default component"),c("--- Runtime Completed ---"),c("--- Post-runtime: Attach hash listener ---"),window.addEventListener("hashchange",u.hashChange,!1),c("--- Post-runtime completed ---")}();
